## 接口设计
#### 接口清单
| 序号 | 模块     | 说明 |
| ---- | -------- | ---- |
| 1    | 网页     |      |
| 2    | 我的指纹 |      |
| 3    | 数据存储 |      |
| 4    | 数据分析 |      |
| 5    | 问题反馈 |      |
### 一、网页
| 序号 | 接口                  | 说明       |
| ---- | --------------------- | ---------- |
| 1    | js1_html         | 首页       |
| 2 | send | 首页 |
| 3 | js3_html | 浏览器指纹介绍 |
| 4 | js4_html | 浏览器指纹属性介绍 |
| 5 | favicon | favicon.ico |

#### 1\.  js1_html
##### 功能说明
>进入网站首页

##### 接口说明
+ 请求方式：GET
+ 依赖环境：Flask
+ 请求地址：http://ip:port/js1.html
+ 请求参数：无

#### 2\.  send
##### 功能说明
>进入网站首页

##### 接口说明
+ 请求方式：GET
+ 依赖环境：Flask
+ 请求地址：http://ip:port
+ 请求参数：无

#### 3\.  js3_html
##### 功能说明
>进入介绍浏览器指纹的页面

##### 接口说明
+ 请求方式：GET
+ 依赖环境：Flask
+ 请求地址：http://ip:port/js3.html
+ 请求参数：无

#### 4\.  js4_html
##### 功能说明
>进入介绍浏览器指纹属性的页面

##### 接口说明
+ 请求方式：GET
+ 依赖环境：Flask
+ 请求地址：http://ip:port/js4.html
+ 请求参数：无

#### 5\.  favicon
##### 功能说明
>返回favicon.ico

##### 接口说明
+ 请求方式：GET
+ 依赖环境：Flask
+ 请求地址：http://ip:port/favicon.ico
+ 请求参数：无


### 二、我的指纹
| 序号 | 接口                  | 说明       |
| ---- | --------------------- | ---------- |
| 1    | js_html          | 我的指纹页面 |
| 2    | canvas_html | canvas属性 |
#### 1\.  js_html
##### 功能说明
>进入我的指纹页面，获取head指纹属性并显示，存储到txt文件

##### 接口说明
+ 请求方式：GET
+ 请求地址：http://ip:port/js.html
+ 请求参数：无

##### 响应参数

| 参数名 | 说明                             |
| ------ | -------------------------------- |
| u      |                                  |
| hash   | 通过head属性计算出的哈希值       |
| m      | 是否存在相同数据(1 - 是；0 - 否) |
| x      | 已有的浏览器指纹记录数量         |
| s      |                                  |
| q      |                                  |
| w      |                                  |
| e      |                                  |
| r      |                                  |
| t      |                                  |
| y      |                                  |
| count  | 与当前浏览器指纹相同的数据数量   |


#### 2\. canvas_html
##### 功能说明
>返回canvas.html页面，获取并显示canvas、webgl指纹属性


##### 接口说明
+ 请求方式：GET
+ 请求地址：http://ip:port/canvas.html
+ 请求参数：无

### 三、数据存储
#### 1\. save_fingerprint
##### 功能说明
>将指纹属性存储至数据库


##### 接口说明
+ 请求方式：POST
+ 请求地址：http://ip:port/save_fingerprint
+ 请求参数：浏览器指纹属性
+ 依赖环境：python库 dict_to_db、json

##### 响应参数
###### 存储成功
```
{
    "code": 0,
    "msg": "服务器已收到您的指纹信息！"
}
```

###### 存储失败
```
{
    "code": 1,
    "msg": "出错了！请检查BUG！"
}
```


### 四、数据分析
| 序号 | 接口                  | 说明       |
| ---- | --------------------- | ---------- |
| 1 | render_chart | 查看部分浏览器指纹属性比例 |
| 2 | compute_data | 查询浏览器指纹信息 |
#### 1\.  render_chart
##### 功能说明
>查看部分浏览器指纹属性在所有数据中的占比

##### 接口说明
+ 请求方式：GET
+ 依赖环境：Flask
+ 请求地址：http://ip:port/chart.html
+ 请求参数：无

#### 2\. compute_data
##### 功能说明
>查询一定时间内的部分指纹数据

##### 接口说明
+ 请求方式：GET
+ 请求地址：http://ip:port/compute_data
##### 请求参数
| 参数       | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| start_time | 查询一定时间内的指纹属性记录(today - 今日；three_day - 三天内；week - 一周内；无参数 - 所有) |
##### 响应参数

| 参数         | 数据类型 | 说明 |
| ------------ | -------- | ---- |
| code         |          |      |
| msg          |          |      |
| total_count  |          |      |
| search_count |          |      |
| data         |          |      |



###### 获取成功示例
```
{
    "code": 0,
    "msg": "success",
    "total_count": 148,
    "search_count": 148,
    "data": {
        "browser_info": [
            {"name": "其它","value": 0},
            {"name": "Chrome","value": 0.9448275862068966},
            {"name": "Firefox", "value": 0.05517241379310345}
        ],
        "angle_info":[
            {"name": "其它","value": 0},
            {"name": "True, Direct3D 11","value": 0.9103448275862069},
            {"name": "True, Direct3D 9","value": 0.0896551724137931}
        ]
        ......
    }
}
```
###### 获取失败
```
{
    "code": 1,
    "msg": "出错了！请检查BUG！"
}
```


### 五、问题反馈
| 序号 | 接口                  | 说明       |
| ---- | --------------------- | ---------- |
| 1 | js5_html | 问题反馈页面 |
| 2 | save_information | 存储反馈的问题 |

#### 1\.  js5_html
##### 功能说明
>进入问题反馈页面

##### 接口说明
+ 请求方式：GET
+ 依赖环境：Flask
+ 请求地址：http://ip:port/js5.html
+ 请求参数：无

#### 2\. save_information
##### 功能说明
>存储反馈的问题


##### 接口说明
+ 请求方式：POST
+ 请求地址：http://ip:port/save_information
+ 请求参数：反馈信息

##### 响应参数
###### 存储成功
```
{
    "code": 0,
    "msg": "服务器已收到您的指纹信息！"
}
```

###### 存储失败
```
{
    "code": 1,
    "msg": "出错了！请检查BUG！"
}
```

### js接口

#### 1\. getCanvasFp
##### 功能说明
>获取canvas指纹信息

##### 接口说明
+ 请求参数：canvas、canvas1 ~ canvas6 (canvas元素)
+ 响应参数：resultAll (记录canvas浏览器指纹信息)

#### 2\. hashStr
##### 功能说明
>对字符串进行hash处理

##### 接口说明
+ 请求参数：s (待处理的字符串)
+ 响应参数：hash (计算得到的hash值)

#### 3\. Barrier
##### 功能说明
>

##### 接口说明
+ 请求参数：
+ 响应参数：

#### 4\. gl-matrix-min-1.2.3
##### 功能说明
>

##### 接口说明
+ 请求参数：
+ 响应参数：

#### 5\. getWebglConstants
##### 功能说明
>

##### 接口说明
+ 请求参数：
+ 响应参数：

#### 6\. getWebglFp
##### 功能说明
>

##### 接口说明
+ 请求参数：webgl (canvas元素)
+ 响应参数：

#### 7\. webglReplenish
##### 功能说明
>

##### 接口说明
+ 请求参数：
+ 响应参数：

#### 8\. webgl-debug
##### 功能说明
>

##### 接口说明
+ 请求参数：
+ 响应参数：

#### 9\. Texture
##### 功能说明
>

##### 接口说明
+ 请求参数：
+ 响应参数：

#### 10\. shaders
##### 功能说明
>

##### 接口说明
+ 请求参数：
+ 响应参数：

#### 11\. WebGLTeapot
##### 功能说明
>

##### 接口说明
+ 请求参数：
+ 响应参数：